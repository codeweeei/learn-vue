{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/compiler/index.js","../src/init.js","../src/index.js"],"sourcesContent":["// 工具库\r\n\r\nexport function isFunction(val) {\r\n\treturn typeof val === 'function';\r\n}\r\n\r\nexport function isObject(val) {\r\n\treturn Object.prototype.toString.call(val) === '[object Object]';\r\n}\r\n","const oldArrayPrototype = Array.prototype;\r\nexport const arrayMethods = Object.create(oldArrayPrototype);\r\n\r\nlet methods = ['push', 'shift', 'unshift', 'pop', 'reverse', 'sort', 'splice'];\r\n\r\nmethods.forEach((method) => {\r\n\t// 重写上述数组方法\r\n\tarrayMethods[method] = function (...args) {\r\n\t\toldArrayPrototype[method].call(this, ...args);\r\n\t\tlet inserted;\r\n\t\t// 注意数组新增引用类型数据时，需要对新增的数据进行劫持（push、unshift和splice）\r\n\t\tswitch (method) {\r\n\t\t\tcase 'push':\r\n\t\t\tcase 'unshift':\r\n\t\t\t\tinserted = args;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'splice':\r\n\t\t\t\tinserted = args.slice(2);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif (inserted) this.__ob__.observeArray(inserted);\r\n\t};\r\n});\r\n","// 观测data，进行数据劫持\r\nimport { isObject } from '../utils';\r\nimport { arrayMethods } from './array';\r\n\r\n// 观测者类：检测数据的变化（类存在类型）\r\nexport class Observe {\r\n\tconstructor(data) {\r\n\t\t// 将观测实例作为属性保存至观测的对象，注意该属性不能被枚举，否则会陷入this.walk(data)中的死循环\r\n\t\tObject.defineProperty(data, '__ob__', {\r\n\t\t\tvalue: this,\r\n\t\t\tenumerable: false,\r\n\t\t});\r\n\t\t// 对 data 中的所有属性进行劫持（注意数组的递归监控）\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tdata._proto_ = arrayMethods;\r\n\t\t\t// 对数组中的引用类型进行劫持\r\n\t\t\tthis.observeArray(data);\r\n\t\t} else {\r\n\t\t\tthis.walk(data);\r\n\t\t}\r\n\t}\r\n\tobserveArray(data) {\r\n\t\tdata.forEach((item) => observe(item));\r\n\t}\r\n\twalk(data) {\r\n\t\tObject.keys(data).forEach((key) => {\r\n\t\t\tdefineReactive(data, key, data[key]);\r\n\t\t});\r\n\t}\r\n}\r\nfunction defineReactive(data, key, val) {\r\n\t// val可能也是对象，因此需要递归处理嵌套val里的对象，劫持深层val里的对象\r\n\tobserve(val);\r\n\tObject.defineProperty(data, key, {\r\n\t\tget() {\r\n\t\t\treturn val;\r\n\t\t},\r\n\t\tset(newVal) {\r\n\t\t\t// data中某个属性赋值给一个新对象时也得劫持 vm._data.a = {b:1}\r\n\t\t\tobserve(newVal);\r\n\t\t\tval = newVal;\r\n\t\t},\r\n\t});\r\n}\r\n\r\nexport function observe(data) {\r\n\t// 判断是否是对象\r\n\tif (!isObject(data)) return;\r\n\tif (data.__ob__) return;\r\n\treturn new Observe(data);\r\n}\r\n","import { isFunction } from './utils';\r\nimport { observe } from './observe/index';\r\n\r\n// 处理 new Vue({...})中传入的props、data、computed、watch等\r\nexport function initState(vm) {\r\n\tconst opts = vm.$options;\r\n\tif (opts.data) {\r\n\t\tinitData(vm);\r\n\t}\r\n}\r\n\r\n// 将data代理至vm实例上\r\nfunction proxyDataToVm(vm, source, key) {\r\n\tObject.defineProperty(vm, key, {\r\n\t\tget() {\r\n\t\t\treturn vm[source][key];\r\n\t\t},\r\n\t\tset(val) {\r\n\t\t\tvm[source][key] = val;\r\n\t\t},\r\n\t});\r\n}\r\n\r\n// 处理 data\r\nfunction initData(vm) {\r\n\t// data可传入函数（返回对象）或者对象，最终取到对象（注意函数内部的this指向）\r\n\tlet data = vm.$options.data;\r\n\t// 关联 data（响应式数据getter和setter） 和 vm._data\r\n\tvm._data = data = isFunction(data) ? data.call(vm) : data;\r\n\t// 代理data至vm\r\n\tfor (let key in data) {\r\n\t\tproxyDataToVm(vm, '_data', key);\r\n\t}\r\n\t// 观测data（将其转换为响应式数据）\r\n\tobserve(data);\r\n}\r\n","// 模板编译\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  用来获取的标签名的 match后的索引为1的\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配开始标签的：<div\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配闭合标签的\r\n// 用来匹配属性的，可匹配 a=\"xxx\" | a='xxx' | a=xxx\r\nconst attribute =\r\n\t/^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/; //  匹配标签闭合  > 或 />\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{aaaaa}}\r\n\r\n// 将解析后的结果，组装成一个树结构（利用栈结构的入栈和出栈最终生成一个树节点root对象）\r\nfunction createAstElement(tagName, attrs) {\r\n\treturn {\r\n\t\ttagName,\r\n\t\ttype: 1,\r\n\t\tchildren: [],\r\n\t\tparent: null,\r\n\t\tattrs,\r\n\t};\r\n}\r\n\r\nlet root = null; // 根节点\r\nlet stack = []; // 树结构\r\n// 解析开始标签：获取开始标签名和属性键值对\r\nfunction start(tagName, attributes) {\r\n\t// 循环引用\r\n\tlet parent = stack[stack.length - 1];\r\n\tlet element = createAstElement(tagName, attributes);\r\n\telement.parent = parent;\r\n\tif (parent) {\r\n\t\tparent.children.push(element);\r\n\t}\r\n\tif (!root) {\r\n\t\troot = element;\r\n\t}\r\n\tstack.push(element);\r\n}\r\n// 解析结束标签：获取结束标签名\r\nfunction end(tagName) {\r\n\t// 弹出栈中最后一个\r\n\tlet element = stack.pop();\r\n\tif (tagName !== element.tagName) {\r\n\t\tthrow new Error('标签有误，没有闭合');\r\n\t}\r\n}\r\n// 解析文本标签：获取标签中的文本\r\nfunction chars(text) {\r\n\t// 去除文本中的空格\r\n\ttext = text.replace(/\\s/g, '');\r\n\tlet parent = stack[stack.length - 1];\r\n\tif (text) {\r\n\t\tparent.children.push({\r\n\t\t\ttype: 3,\r\n\t\t\ttext,\r\n\t\t});\r\n\t}\r\n}\r\n\r\n// 解析模板字符串 <div id=\"app\">{{name}}</div>\r\nfunction parserHTML(html) {\r\n\t// 截取字符串（删除匹配完的部分）\r\n\tfunction advance(len) {\r\n\t\thtml = html.substring(len);\r\n\t}\r\n\t// 解析开始标签：获取开始标签名和属性键值对数组\r\n\tfunction parseStartTag() {\r\n\t\tconst start = html.match(startTagOpen);\r\n\t\tif (start) {\r\n\t\t\tconst match = {\r\n\t\t\t\ttagName: start[1],\r\n\t\t\t\tattrs: [],\r\n\t\t\t};\r\n\t\t\tadvance(start[0].length); // 截去<div html -> id=\"app\">{{name}}</div>\r\n\t\t\t// 匹配属性：没有遇到>或/>时并且可以匹配到属性时将匹配到的属性名和值保存在attrs\r\n\t\t\tlet end; // 匹配闭合标签符号\r\n\t\t\tlet attr; // 匹配属性\r\n\t\t\twhile (\r\n\t\t\t\t!(end = html.match(startTagClose)) &&\r\n\t\t\t\t(attr = html.match(attribute))\r\n\t\t\t) {\r\n\t\t\t\tmatch.attrs.push({\r\n\t\t\t\t\tname: attr[1],\r\n\t\t\t\t\tvalue: attr[3] || attr[4] || attr[5],\r\n\t\t\t\t});\r\n\t\t\t\t// 截去匹配的属性等式: id=\"app\" -> >{{name}}</div>\r\n\t\t\t\tadvance(attr[0].length);\r\n\t\t\t}\r\n\t\t\t// 截去匹配到的开始标签结束的>符号 -> {{name}}</div>\r\n\t\t\tif (end) advance(end[0].length);\r\n\t\t\treturn match;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t// 解析结束标签：获取结束标签名\r\n\tfunction parseEndTag() {\r\n\t\tconst end = html.match(endTag);\r\n\t\tif (end) {\r\n\t\t\tadvance(end[0].length);\r\n\t\t\treturn end[1];\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t// 每解析一部分就删除解析完的那部分\r\n\twhile (html) {\r\n\t\tlet textEnd = html.indexOf('<');\r\n\t\tif (textEnd === 0) {\r\n\t\t\t// 解析开始标签：获取标签名和属性键值对数组\r\n\t\t\tconst startTagMatch = parseStartTag();\r\n\t\t\tif (startTagMatch) {\r\n\t\t\t\tstart(startTagMatch.tagName, startTagMatch.attrs);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t// 解析结束标签：获取结束标签名\r\n\t\t\tconst endTagMatch = parseEndTag();\r\n\t\t\tif (endTagMatch) {\r\n\t\t\t\tend(endTagMatch);\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet text;\r\n\t\tif (textEnd > 0) {\r\n\t\t\t// {{name}}</div>\r\n\t\t\ttext = html.substring(0, textEnd); // {{name}}\r\n\t\t}\r\n\t\tif (text) {\r\n\t\t\tchars(text);\r\n\t\t\tadvance(text.length); // </div>\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// html字符串解析成对应的tokens（词法分析）\r\nexport function compilerToFunction(template) {\r\n\tparserHTML(template);\r\n\tconsole.log(root);\r\n}\r\n","import { initState } from './state';\r\nimport { compilerToFunction } from './compiler/index';\r\n\r\n// 初始化vue\r\nexport function initMixin(Vue) {\r\n\t// 初始化state\r\n\tVue.prototype._init = function (options) {\r\n\t\tconst vm = this;\r\n\t\t// 将options放置vm的$options上\r\n\t\tvm.$options = options;\r\n\t\t// 对数据进行初始化\r\n\t\tinitState(vm);\r\n\r\n\t\t// 处理el，将数据挂载在el指向的模板上\r\n\t\tif (vm.$options.el) {\r\n\t\t\tvm.$mount(vm.$options.el);\r\n\t\t}\r\n\t};\r\n\tVue.prototype.$mount = function (el) {\r\n\t\t// 获取模板\r\n\t\tconst vm = this;\r\n\t\tconst options = vm.$options;\r\n\t\tel = document.querySelector(el);\r\n\t\t// 将模板转换为渲染函数（render），用于创建虚拟节点，增加渲染模板的性能\r\n\t\tif (!options.render) {\r\n\t\t\t// 用户没有传入render函数时使用template模板\r\n\t\t\tlet template = options.template;\r\n\t\t\tif (!template && el) {\r\n\t\t\t\t// 用户没有传入template模板时将el作为template\r\n\t\t\t\ttemplate = el.outerHTML; // outerHTML 不带空格\r\n\t\t\t\t// 将模板转为render渲染函数\r\n\t\t\t\tlet render = compilerToFunction(template);\r\n\t\t\t\toptions.render = render;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n","import { initMixin } from './init';\r\n\r\nfunction Vue(options) {\r\n\t// const vm = this;\r\n\t// vm.$options = options;\r\n\t// init(vm);\r\n\t// return vm;\r\n\tthis._init(options);\r\n}\r\ninitMixin(Vue);\r\n\r\nexport default Vue;\r\n"],"names":["isFunction","val","isObject","Object","prototype","toString","call","oldArrayPrototype","Array","arrayMethods","create","methods","forEach","method","args","inserted","slice","__ob__","observeArray","Observe","data","defineProperty","value","enumerable","isArray","_proto_","walk","item","observe","keys","key","defineReactive","get","set","newVal","initState","vm","opts","$options","initData","proxyDataToVm","source","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","createAstElement","tagName","attrs","type","children","parent","root","stack","start","attributes","length","element","push","end","pop","Error","chars","text","replace","parserHTML","html","advance","len","substring","parseStartTag","match","attr","name","parseEndTag","textEnd","indexOf","startTagMatch","endTagMatch","compilerToFunction","template","console","log","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML"],"mappings":"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"}