{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/compiler/index.js","../src/init.js","../src/index.js"],"sourcesContent":["// 工具库\r\n\r\nexport function isFunction(val) {\r\n\treturn typeof val === 'function';\r\n}\r\n\r\nexport function isObject(val) {\r\n\treturn Object.prototype.toString.call(val) === '[object Object]';\r\n}\r\n","const oldArrayPrototype = Array.prototype;\r\nexport const arrayMethods = Object.create(oldArrayPrototype);\r\n\r\nlet methods = ['push', 'shift', 'unshift', 'pop', 'reverse', 'sort', 'splice'];\r\n\r\nmethods.forEach((method) => {\r\n\t// 重写上述数组方法\r\n\tarrayMethods[method] = function (...args) {\r\n\t\toldArrayPrototype[method].call(this, ...args);\r\n\t\tlet inserted;\r\n\t\t// 注意数组新增引用类型数据时，需要对新增的数据进行劫持（push、unshift和splice）\r\n\t\tswitch (method) {\r\n\t\t\tcase 'push':\r\n\t\t\tcase 'unshift':\r\n\t\t\t\tinserted = args;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'splice':\r\n\t\t\t\tinserted = args.slice(2);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tif (inserted) this.__ob__.observeArray(inserted);\r\n\t};\r\n});\r\n","// 观测data，进行数据劫持\r\nimport { isObject } from '../utils';\r\nimport { arrayMethods } from './array';\r\n\r\n// 观测者类：检测数据的变化（类存在类型）\r\nexport class Observe {\r\n\tconstructor(data) {\r\n\t\t// 将观测实例作为属性保存至观测的对象，注意该属性不能被枚举，否则会陷入this.walk(data)中的死循环\r\n\t\tObject.defineProperty(data, '__ob__', {\r\n\t\t\tvalue: this,\r\n\t\t\tenumerable: false,\r\n\t\t});\r\n\t\t// 对 data 中的所有属性进行劫持（注意数组的递归监控）\r\n\t\tif (Array.isArray(data)) {\r\n\t\t\tdata._proto_ = arrayMethods;\r\n\t\t\t// 对数组中的引用类型进行劫持\r\n\t\t\tthis.observeArray(data);\r\n\t\t} else {\r\n\t\t\tthis.walk(data);\r\n\t\t}\r\n\t}\r\n\tobserveArray(data) {\r\n\t\tdata.forEach((item) => observe(item));\r\n\t}\r\n\twalk(data) {\r\n\t\tObject.keys(data).forEach((key) => {\r\n\t\t\tdefineReactive(data, key, data[key]);\r\n\t\t});\r\n\t}\r\n}\r\nfunction defineReactive(data, key, val) {\r\n\t// val可能也是对象，因此需要递归处理嵌套val里的对象，劫持深层val里的对象\r\n\tobserve(val);\r\n\tObject.defineProperty(data, key, {\r\n\t\tget() {\r\n\t\t\treturn val;\r\n\t\t},\r\n\t\tset(newVal) {\r\n\t\t\t// data中某个属性赋值给一个新对象时也得劫持 vm._data.a = {b:1}\r\n\t\t\tobserve(newVal);\r\n\t\t\tval = newVal;\r\n\t\t},\r\n\t});\r\n}\r\n\r\nexport function observe(data) {\r\n\t// 判断是否是对象\r\n\tif (!isObject(data)) return;\r\n\tif (data.__ob__) return;\r\n\treturn new Observe(data);\r\n}\r\n","import { isFunction } from './utils';\r\nimport { observe } from './observe/index';\r\n\r\n// 处理 new Vue({...})中传入的props、data、computed、watch等\r\nexport function initState(vm) {\r\n\tconst opts = vm.$options;\r\n\tif (opts.data) {\r\n\t\tinitData(vm);\r\n\t}\r\n}\r\n\r\n// 将data代理至vm实例上\r\nfunction proxyDataToVm(vm, source, key) {\r\n\tObject.defineProperty(vm, key, {\r\n\t\tget() {\r\n\t\t\treturn vm[source][key];\r\n\t\t},\r\n\t\tset(val) {\r\n\t\t\tvm[source][key] = val;\r\n\t\t},\r\n\t});\r\n}\r\n\r\n// 处理 data\r\nfunction initData(vm) {\r\n\t// data可传入函数（返回对象）或者对象，最终取到对象（注意函数内部的this指向）\r\n\tlet data = vm.$options.data;\r\n\t// 关联 data（响应式数据getter和setter） 和 vm._data\r\n\tvm._data = data = isFunction(data) ? data.call(vm) : data;\r\n\t// 代理data至vm\r\n\tfor (let key in data) {\r\n\t\tproxyDataToVm(vm, '_data', key);\r\n\t}\r\n\t// 观测data（将其转换为响应式数据）\r\n\tobserve(data);\r\n}\r\n","// 模板编译\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 标签名\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  用来获取的标签名的 match后的索引为1的\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 匹配开始标签的：<div\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配闭合标签的\r\n// 用来匹配属性的，可匹配 a=\"xxx\" | a='xxx' | a=xxx\r\nconst attribute =\r\n\t/^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/; //  匹配标签闭合  > 或 />\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{aaaaa}}\r\n\r\n// 解析开始标签：获取开始标签名和属性键值对\r\nfunction start(tagName, attributes) {\r\n\tconsole.log('start：' + tagName);\r\n\tconsole.log(attributes);\r\n}\r\n// 解析结束标签：获取结束标签名\r\nfunction end(tagName) {\r\n\tconsole.log('end：' + tagName);\r\n}\r\n// 解析文本标签：获取标签中的文本\r\nfunction chars(text) {\r\n\tconsole.log('text：' + text);\r\n}\r\n\r\n// html字符串解析成对应的tokens（词法分析）\r\nexport function compilerToFunction(template) {\r\n\t// 解析模板字符串 <div id=\"app\">{{name}}</div>\r\n\tfunction parserHTML(html) {\r\n\t\t// 截取字符串（删除匹配完的部分）\r\n\t\tfunction advance(len) {\r\n\t\t\thtml = html.substring(len);\r\n\t\t}\r\n\t\t// 解析开始标签：获取开始标签名和属性键值对数组\r\n\t\tfunction parseStartTag() {\r\n\t\t\tconst start = html.match(startTagOpen);\r\n\t\t\tif (start) {\r\n\t\t\t\tconst match = {\r\n\t\t\t\t\ttagName: start[1],\r\n\t\t\t\t\tattrs: [],\r\n\t\t\t\t};\r\n\t\t\t\tadvance(start[0].length); // 截去<div html -> id=\"app\">{{name}}</div>\r\n\t\t\t\t// 匹配属性：没有遇到>或/>时并且可以匹配到属性时将匹配到的属性名和值保存在attrs\r\n\t\t\t\tlet end; // 匹配闭合标签符号\r\n\t\t\t\tlet attr; // 匹配属性\r\n\t\t\t\twhile (\r\n\t\t\t\t\t!(end = html.match(startTagClose)) &&\r\n\t\t\t\t\t(attr = html.match(attribute))\r\n\t\t\t\t) {\r\n\t\t\t\t\tmatch.attrs.push({\r\n\t\t\t\t\t\tname: attr[1],\r\n\t\t\t\t\t\tvalue: attr[3] || attr[4] || attr[5],\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 截去匹配的属性等式: id=\"app\" -> >{{name}}</div>\r\n\t\t\t\t\tadvance(attr[0].length);\r\n\t\t\t\t}\r\n\t\t\t\t// 截去匹配到的开始标签结束的>符号 -> {{name}}</div>\r\n\t\t\t\tif (end) advance(end[0].length);\r\n\t\t\t\treturn match;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// 解析结束标签：获取结束标签名\r\n\t\tfunction parseEndTag() {\r\n\t\t\tconst end = html.match(endTag);\r\n\t\t\tif (end) {\r\n\t\t\t\tadvance(end[0].length);\r\n\t\t\t\treturn end[1];\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// 每解析一部分就删除解析完的那部分\r\n\t\twhile (html) {\r\n\t\t\tlet textEnd = html.indexOf('<');\r\n\t\t\tif (textEnd === 0) {\r\n\t\t\t\t// 解析开始标签：获取标签名和属性键值对数组\r\n\t\t\t\tconst startTagMatch = parseStartTag();\r\n\t\t\t\tif (startTagMatch) {\r\n\t\t\t\t\tstart(startTagMatch.tagName, startTagMatch.attrs);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// 解析结束标签：获取结束标签名\r\n\t\t\t\tconst endTagMatch = parseEndTag();\r\n\t\t\t\tif (endTagMatch) {\r\n\t\t\t\t\tend(endTagMatch);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet text;\r\n\t\t\tif (textEnd > 0) {\r\n\t\t\t\t// {{name}}</div>\r\n\t\t\t\ttext = html.substring(0, textEnd); // {{name}}\r\n\t\t\t}\r\n\t\t\tif (text) {\r\n\t\t\t\tchars(text);\r\n\t\t\t\tadvance(text.length); // </div>\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tparserHTML(template);\r\n}\r\n","import { initState } from './state';\r\nimport { compilerToFunction } from './compiler/index';\r\n\r\n// 初始化vue\r\nexport function initMixin(Vue) {\r\n\t// 初始化state\r\n\tVue.prototype._init = function (options) {\r\n\t\tconst vm = this;\r\n\t\t// 将options放置vm的$options上\r\n\t\tvm.$options = options;\r\n\t\t// 对数据进行初始化\r\n\t\tinitState(vm);\r\n\r\n\t\t// 处理el，将数据挂载在el指向的模板上\r\n\t\tif (vm.$options.el) {\r\n\t\t\tvm.$mount(vm.$options.el);\r\n\t\t}\r\n\t};\r\n\tVue.prototype.$mount = function (el) {\r\n\t\t// 获取模板\r\n\t\tconst vm = this;\r\n\t\tconst options = vm.$options;\r\n\t\tel = document.querySelector(el);\r\n\t\t// 将模板转换为渲染函数（render），用于创建虚拟节点，增加渲染模板的性能\r\n\t\tif (!options.render) {\r\n\t\t\t// 用户没有传入render函数时使用template模板\r\n\t\t\tlet template = options.template;\r\n\t\t\tif (!template && el) {\r\n\t\t\t\t// 用户没有传入template模板时将el作为template\r\n\t\t\t\ttemplate = el.outerHTML; // outerHTML 不带空格\r\n\t\t\t\t// 将模板转为render渲染函数\r\n\t\t\t\tlet render = compilerToFunction(template);\r\n\t\t\t\toptions.render = render;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n","import { initMixin } from './init';\r\n\r\nfunction Vue(options) {\r\n\t// const vm = this;\r\n\t// vm.$options = options;\r\n\t// init(vm);\r\n\t// return vm;\r\n\tthis._init(options);\r\n}\r\ninitMixin(Vue);\r\n\r\nexport default Vue;\r\n"],"names":["isFunction","val","isObject","Object","prototype","toString","call","oldArrayPrototype","Array","arrayMethods","create","methods","forEach","method","args","inserted","slice","__ob__","observeArray","Observe","data","defineProperty","value","enumerable","isArray","_proto_","walk","item","observe","keys","key","defineReactive","get","set","newVal","initState","vm","opts","$options","initData","proxyDataToVm","source","_data","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","start","tagName","attributes","console","log","end","chars","text","compilerToFunction","template","parserHTML","html","advance","len","substring","parseStartTag","match","attrs","length","attr","push","name","parseEndTag","textEnd","indexOf","startTagMatch","endTagMatch","initMixin","Vue","_init","options","el","$mount","document","querySelector","render","outerHTML"],"mappings":"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"}